{"remainingRequest":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\src\\Celador.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\src\\Celador.vue","mtime":1743938802664},{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743939203533},{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\babel-loader\\lib\\index.js","mtime":1743939204733},{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743939203533},{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\vue-loader\\lib\\index.js","mtime":1743939202103}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0cmFzbGFkb3M6IFtdLAogICAgICBzb2NrZXQ6IG51bGwsCiAgICAgIGNlbGFkb3JJZDogdGhpcy4kcm91dGUucGFyYW1zLmlkIC8vIE9idGVuZXIgZWwgSUQgZGVsIGNlbGFkb3IgZGVzZGUgbGEgVVJMCiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuc29ja2V0ID0gbmV3IFdlYlNvY2tldCgid3M6Ly9sb2NhbGhvc3Q6MzAwMCIpOwoKICAgIC8vIENvbmVjdGFyIGFsIFdlYlNvY2tldAogICAgdGhpcy5zb2NrZXQub25vcGVuID0gKCkgPT4gewogICAgICBjb25zb2xlLmxvZygiQ29uZWN0YWRvIGFsIHNlcnZpZG9yIFdlYlNvY2tldCIpOwogICAgICB0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsKICAgICAgICB0eXBlOiAncmVnaXN0ZXInLAogICAgICAgIGlkOiB0aGlzLmNlbGFkb3JJZAogICAgICB9KSk7CiAgICB9OwoKICAgIC8vIEVzY3VjaGFyIGxvcyBtZW5zYWplcyBkZSB0cmFzbGFkb3MKICAgIHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IGV2ZW50ID0+IHsKICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdudWV2b190cmFzbGFkbycpIHsKICAgICAgICAvLyBGaWx0cmFyIGxvcyB0cmFzbGFkb3MgcXVlIGxlIGNvcnJlc3BvbmRlbiBhbCBjZWxhZG9yIHNlZ8O6biBzdSB1YmljYWNpw7NuCiAgICAgICAgaWYgKGRhdGEudHJhc2xhZG8udWJpY2FjaW9uICYmIHRoaXMudWJpY2FjaW9uZXMuaW5jbHVkZXMoZGF0YS50cmFzbGFkby51YmljYWNpb24pKSB7CiAgICAgICAgICB0aGlzLnRyYXNsYWRvcy5wdXNoKGRhdGEudHJhc2xhZG8pOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAvLyBMYXMgdWJpY2FjaW9uZXMgYXNpZ25hZGFzIGFsIGNlbGFkb3IKICAgIHViaWNhY2lvbmVzKCkgewogICAgICAvLyBBcXXDrSBkZWJlcsOtYXMgY29uc3VsdGFyIGxhcyB1YmljYWNpb25lcyBkZWwgY2VsYWRvciBlbiBsYSBiYXNlIGRlIGRhdG9zIHNpIGVzIG5lY2VzYXJpbwogICAgICByZXR1cm4gWyJQTEFOVEEgQkFKQSIsICJQTEFOVEEgMsKqIiAvLyBFamVtcGxvLCBzZSBwb2Ryw61hbiBjYXJnYXIgZGVzZGUgbGEgYmFzZSBkZSBkYXRvcwogICAgICBdOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWNlcHRhclRyYXNsYWRvKHRyYXNsYWRvKSB7CiAgICAgIGFsZXJ0KGBUcmFzbGFkbyBhY2VwdGFkbzogJHt0cmFzbGFkby5kZXN0aW5vfWApOwogICAgICAvLyBBcXXDrSBwdWVkZXMgaW1wbGVtZW50YXIgbGEgbMOzZ2ljYSBwYXJhIGFjZXB0YXIgZWwgdHJhc2xhZG8gKGVudmlhciBjb25maXJtYWNpw7NuIGFsIHNlcnZpZG9yLCBldGMuKQogICAgfSwKICAgIGNlcnJhclNlc2lvbigpIHsKICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgfQogIH0KfTs="},{"version":3,"names":["data","traslados","socket","celadorId","$route","params","id","mounted","WebSocket","onopen","console","log","send","JSON","stringify","type","onmessage","event","parse","traslado","ubicacion","ubicaciones","includes","push","computed","methods","aceptarTraslado","alert","destino","cerrarSesion","close","$router"],"sources":["src/Celador.vue"],"sourcesContent":["<template>\n  <div>\n    <h3>Traslados Pendientes</h3>\n    <div v-if=\"traslados.length > 0\">\n      <div v-for=\"traslado in traslados\" :key=\"traslado.id\" class=\"traslado-item\">\n        <p><strong>Destino:</strong> {{ traslado.destino }}</p>\n        <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\n        <button @click=\"aceptarTraslado(traslado)\">Aceptar</button>\n      </div>\n    </div>\n    <div v-else>\n      <p>No hay traslados pendientes.</p>\n    </div>\n    <button @click=\"cerrarSesion\">Cerrar sesión</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      traslados: [],\n      socket: null,\n      celadorId: this.$route.params.id, // Obtener el ID del celador desde la URL\n    };\n  },\n  mounted() {\n    this.socket = new WebSocket(\"ws://localhost:3000\");\n\n    // Conectar al WebSocket\n    this.socket.onopen = () => {\n      console.log(\"Conectado al servidor WebSocket\");\n      this.socket.send(JSON.stringify({ type: 'register', id: this.celadorId }));\n    };\n\n    // Escuchar los mensajes de traslados\n    this.socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n\n      if (data.type === 'nuevo_traslado') {\n        // Filtrar los traslados que le corresponden al celador según su ubicación\n        if (data.traslado.ubicacion && this.ubicaciones.includes(data.traslado.ubicacion)) {\n          this.traslados.push(data.traslado);\n        }\n      }\n    };\n  },\n  computed: {\n    // Las ubicaciones asignadas al celador\n    ubicaciones() {\n      // Aquí deberías consultar las ubicaciones del celador en la base de datos si es necesario\n      return [\n        \"PLANTA BAJA\", \"PLANTA 2ª\" // Ejemplo, se podrían cargar desde la base de datos\n      ];\n    }\n  },\n  methods: {\n    aceptarTraslado(traslado) {\n      alert(`Traslado aceptado: ${traslado.destino}`);\n      // Aquí puedes implementar la lógica para aceptar el traslado (enviar confirmación al servidor, etc.)\n    },\n    cerrarSesion() {\n      this.socket.close();\n      this.$router.push('/login');\n    }\n  }\n};\n</script>\n"],"mappings":"AAkBA;EACAA,KAAA;IACA;MACAC,SAAA;MACAC,MAAA;MACAC,SAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAL,MAAA,OAAAM,SAAA;;IAEA;IACA,KAAAN,MAAA,CAAAO,MAAA;MACAC,OAAA,CAAAC,GAAA;MACA,KAAAT,MAAA,CAAAU,IAAA,CAAAC,IAAA,CAAAC,SAAA;QAAAC,IAAA;QAAAT,EAAA,OAAAH;MAAA;IACA;;IAEA;IACA,KAAAD,MAAA,CAAAc,SAAA,GAAAC,KAAA;MACA,MAAAjB,IAAA,GAAAa,IAAA,CAAAK,KAAA,CAAAD,KAAA,CAAAjB,IAAA;MAEA,IAAAA,IAAA,CAAAe,IAAA;QACA;QACA,IAAAf,IAAA,CAAAmB,QAAA,CAAAC,SAAA,SAAAC,WAAA,CAAAC,QAAA,CAAAtB,IAAA,CAAAmB,QAAA,CAAAC,SAAA;UACA,KAAAnB,SAAA,CAAAsB,IAAA,CAAAvB,IAAA,CAAAmB,QAAA;QACA;MACA;IACA;EACA;EACAK,QAAA;IACA;IACAH,YAAA;MACA;MACA,QACA;MAAA,CACA;IACA;EACA;EACAI,OAAA;IACAC,gBAAAP,QAAA;MACAQ,KAAA,uBAAAR,QAAA,CAAAS,OAAA;MACA;IACA;IACAC,aAAA;MACA,KAAA3B,MAAA,CAAA4B,KAAA;MACA,KAAAC,OAAA,CAAAR,IAAA;IACA;EACA;AACA","ignoreList":[]}]}