{"remainingRequest":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\src\\Jefe.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\src\\Jefe.vue","mtime":1744573155711},{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1744571297417},{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\babel-loader\\lib\\index.js","mtime":1744571250338},{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1744571297417},{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\vue-loader\\lib\\index.js","mtime":1744572993378}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwZW5kaWVudGVzOiBbXSwKICAgICAgYWNlcHRhZG9zOiBbXSwKICAgICAgZmluYWxpemFkb3M6IFtdLAogICAgICBzb2NrZXQ6IG51bGwsCiAgICAgIGplZmVJZDogIkpFRkVfMSIKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5jb25lY3RhcldlYlNvY2tldCgpOyAvLyBDb25lY3RhciBhbCBXZWJTb2NrZXQgY3VhbmRvIGVsIGNvbXBvbmVudGUgc2UgbW9udGEKICAgIHRoaXMuY2FyZ2FyVHJhc2xhZG9zKCk7IC8vIENhcmdhciBsb3MgdHJhc2xhZG9zIGFsIGNhcmdhciBsYSBww6FnaW5hCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBDb25lY3RhciBhbCBzZXJ2aWRvciBXZWJTb2NrZXQKICAgIGNvbmVjdGFyV2ViU29ja2V0KCkgewogICAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQoIndzOi8vbG9jYWxob3N0OjMwMDAiKTsKICAgICAgdGhpcy5zb2NrZXQub25vcGVuID0gKCkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCJXZWJTb2NrZXQgY29uZWN0YWRvIGNvbW8gamVmZSIpOwogICAgICAgIHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgdHlwZTogInJlZ2lzdGVyX2plZmUiLAogICAgICAgICAgaWQ6IHRoaXMuamVmZUlkCiAgICAgICAgfSkpOwogICAgICB9OwogICAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSBldmVudCA9PiB7CiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgICAgY29uc29sZS5sb2coIk1lbnNhamUgcmVjaWJpZG86IiwgZGF0YSk7CiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gImFjdHVhbGl6YXJfdHJhc2xhZG9zIikgewogICAgICAgICAgLy8gQWN0dWFsaXphciBsb3MgdHJhc2xhZG9zIGN1YW5kbyBlbCBzZXJ2aWRvciBlbnbDrWUgdW5hIGFjdHVhbGl6YWNpw7NuCiAgICAgICAgICB0aGlzLmNhcmdhclRyYXNsYWRvcygpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5zb2NrZXQub25jbG9zZSA9ICgpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygiV2ViU29ja2V0IGNlcnJhZG8sIHJlY29uZWN0YW5kbyBlbiAycy4uLiIpOwogICAgICAgIHNldFRpbWVvdXQodGhpcy5jb25lY3RhcldlYlNvY2tldCwgMjAwMCk7IC8vIEludGVudGFyIHJlY29uZWN0YXIgZGVzcHXDqXMgZGUgMiBzZWd1bmRvcwogICAgICB9OwogICAgICB0aGlzLnNvY2tldC5vbmVycm9yID0gZXJyb3IgPT4gewogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGVuIFdlYlNvY2tldDoiLCBlcnJvcik7CiAgICAgICAgdGhpcy5zb2NrZXQuY2xvc2UoKTsgLy8gQ2VycmFyIGVsIHNvY2tldCBzaSBvY3VycmUgdW4gZXJyb3IKICAgICAgfTsKICAgIH0sCiAgICAvLyBDYXJnYXIgbG9zIHRyYXNsYWRvcyBkZSBsYXMgZGlmZXJlbnRlcyBjYXRlZ29yw61hcwogICAgY2FyZ2FyVHJhc2xhZG9zKCkgewogICAgICBjb25zb2xlLmxvZygi8J+UhCBFamVjdXRhbmRvIGNhcmdhclRyYXNsYWRvcygpIik7CgogICAgICAvLyBGZXRjaCBkZSB0cmFzbGFkb3MgcGVuZGllbnRlcwogICAgICBmZXRjaCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL3RyYXNsYWRvcy9wZW5kaWVudGVzIikudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihkYXRhID0+IHsKICAgICAgICBjb25zb2xlLmxvZygi8J+TpiBQZW5kaWVudGVzIHJlY2liaWRvczoiLCBkYXRhKTsKICAgICAgICB0aGlzLnBlbmRpZW50ZXMgPSBkYXRhOwogICAgICB9KTsKCiAgICAgIC8vIEZldGNoIGRlIHRyYXNsYWRvcyBhY2VwdGFkb3MKICAgICAgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC90cmFzbGFkb3MvYWNlcHRhZG9zIikudGhlbihyZXMgPT4gcmVzLmpzb24oKSkudGhlbihkYXRhID0+IHsKICAgICAgICBjb25zb2xlLmxvZygi8J+TpiBBY2VwdGFkb3MgcmVjaWJpZG9zOiIsIGRhdGEpOwogICAgICAgIHRoaXMuYWNlcHRhZG9zID0gZGF0YTsKICAgICAgfSk7CgogICAgICAvLyBGZXRjaCBkZSB0cmFzbGFkb3MgZmluYWxpemFkb3MKICAgICAgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC90cmFzbGFkb3MvZmluYWxpemFkb3MiKS50aGVuKHJlcyA9PiByZXMuanNvbigpKS50aGVuKGRhdGEgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCLwn5OmIEZpbmFsaXphZG9zIHJlY2liaWRvczoiLCBkYXRhKTsKICAgICAgICB0aGlzLmZpbmFsaXphZG9zID0gZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["data","pendientes","aceptados","finalizados","socket","jefeId","mounted","conectarWebSocket","cargarTraslados","methods","WebSocket","onopen","console","log","send","JSON","stringify","type","id","onmessage","event","parse","onclose","setTimeout","onerror","error","close","fetch","then","res","json"],"sources":["src/Jefe.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>Panel del Jefe</h2>\r\n\r\n    <!-- üü° Pendientes -->\r\n    <section>\r\n      <h3>Traslados Pendientes</h3>\r\n      <div v-if=\"pendientes.length > 0\">\r\n        <div v-for=\"traslado in pendientes\" :key=\"traslado.id\" class=\"traslado-item\">\r\n          <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n          <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n          <p><strong>Celador asignado:</strong> {{ traslado.celador_id || \"Sin asignar\" }}</p>\r\n        </div>\r\n      </div>\r\n      <p v-else>No hay traslados pendientes.</p>\r\n    </section>\r\n\r\n    <!-- üü¢ Aceptados -->\r\n    <section>\r\n      <h3>Traslados en Curso</h3>\r\n      <div v-if=\"aceptados.length > 0\">\r\n        <div v-for=\"traslado in aceptados\" :key=\"traslado.id\" class=\"traslado-item\">\r\n          <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n          <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n          <p><strong>Celador asignado:</strong> {{ traslado.celador_id || \"Sin asignar\" }}</p>\r\n        </div>\r\n      </div>\r\n      <p v-else>No hay traslados en curso.</p>\r\n    </section>\r\n\r\n    <!-- ‚úÖ Finalizados -->\r\n    <section>\r\n      <h3>Traslados Finalizados</h3>\r\n      <div v-if=\"finalizados.length > 0\">\r\n        <div v-for=\"traslado in finalizados\" :key=\"traslado.id\" class=\"traslado-item\">\r\n          <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n          <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n          <p><strong>Celador asignado:</strong> {{ traslado.celador_id || \"Sin asignar\" }}</p>\r\n        </div>\r\n      </div>\r\n      <p v-else>No hay traslados finalizados.</p>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      pendientes: [],\r\n      aceptados: [],\r\n      finalizados: [],\r\n      socket: null,\r\n      jefeId: \"JEFE_1\"\r\n    };\r\n  },\r\n  mounted() {\r\n    this.conectarWebSocket(); // Conectar al WebSocket cuando el componente se monta\r\n    this.cargarTraslados(); // Cargar los traslados al cargar la p√°gina\r\n  },\r\n  methods: {\r\n    // Conectar al servidor WebSocket\r\n    conectarWebSocket() {\r\n      this.socket = new WebSocket(\"ws://localhost:3000\");\r\n\r\n      this.socket.onopen = () => {\r\n        console.log(\"WebSocket conectado como jefe\");\r\n        this.socket.send(JSON.stringify({\r\n          type: \"register_jefe\",\r\n          id: this.jefeId\r\n        }));\r\n      };\r\n\r\n      this.socket.onmessage = (event) => {\r\n        const data = JSON.parse(event.data);\r\n        console.log(\"Mensaje recibido:\", data);\r\n\r\n        if (data.type === \"actualizar_traslados\") {\r\n          // Actualizar los traslados cuando el servidor env√≠e una actualizaci√≥n\r\n          this.cargarTraslados();\r\n        }\r\n      };\r\n\r\n      this.socket.onclose = () => {\r\n        console.log(\"WebSocket cerrado, reconectando en 2s...\");\r\n        setTimeout(this.conectarWebSocket, 2000); // Intentar reconectar despu√©s de 2 segundos\r\n      };\r\n\r\n      this.socket.onerror = (error) => {\r\n        console.error(\"Error en WebSocket:\", error);\r\n        this.socket.close(); // Cerrar el socket si ocurre un error\r\n      };\r\n    },\r\n\r\n    // Cargar los traslados de las diferentes categor√≠as\r\n    cargarTraslados() {\r\n      console.log(\"üîÑ Ejecutando cargarTraslados()\");\r\n\r\n      // Fetch de traslados pendientes\r\n      fetch(\"http://localhost:3000/traslados/pendientes\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          console.log(\"üì¶ Pendientes recibidos:\", data);\r\n          this.pendientes = data;\r\n        });\r\n\r\n      // Fetch de traslados aceptados\r\n      fetch(\"http://localhost:3000/traslados/aceptados\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          console.log(\"üì¶ Aceptados recibidos:\", data);\r\n          this.aceptados = data;\r\n        });\r\n\r\n      // Fetch de traslados finalizados\r\n      fetch(\"http://localhost:3000/traslados/finalizados\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          console.log(\"üì¶ Finalizados recibidos:\", data);\r\n          this.finalizados = data;\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.traslado-item {\r\n  border: 1px solid #ccc;\r\n  padding: 8px;\r\n  margin-bottom: 8px;\r\n  border-radius: 6px;\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n"],"mappings":"AA8CA;EACAA,KAAA;IACA;MACAC,UAAA;MACAC,SAAA;MACAC,WAAA;MACAC,MAAA;MACAC,MAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,iBAAA;IACA,KAAAC,eAAA;EACA;EACAC,OAAA;IACA;IACAF,kBAAA;MACA,KAAAH,MAAA,OAAAM,SAAA;MAEA,KAAAN,MAAA,CAAAO,MAAA;QACAC,OAAA,CAAAC,GAAA;QACA,KAAAT,MAAA,CAAAU,IAAA,CAAAC,IAAA,CAAAC,SAAA;UACAC,IAAA;UACAC,EAAA,OAAAb;QACA;MACA;MAEA,KAAAD,MAAA,CAAAe,SAAA,GAAAC,KAAA;QACA,MAAApB,IAAA,GAAAe,IAAA,CAAAM,KAAA,CAAAD,KAAA,CAAApB,IAAA;QACAY,OAAA,CAAAC,GAAA,sBAAAb,IAAA;QAEA,IAAAA,IAAA,CAAAiB,IAAA;UACA;UACA,KAAAT,eAAA;QACA;MACA;MAEA,KAAAJ,MAAA,CAAAkB,OAAA;QACAV,OAAA,CAAAC,GAAA;QACAU,UAAA,MAAAhB,iBAAA;MACA;MAEA,KAAAH,MAAA,CAAAoB,OAAA,GAAAC,KAAA;QACAb,OAAA,CAAAa,KAAA,wBAAAA,KAAA;QACA,KAAArB,MAAA,CAAAsB,KAAA;MACA;IACA;IAEA;IACAlB,gBAAA;MACAI,OAAA,CAAAC,GAAA;;MAEA;MACAc,KAAA,+CACAC,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAC,IAAA,IACAF,IAAA,CAAA5B,IAAA;QACAY,OAAA,CAAAC,GAAA,6BAAAb,IAAA;QACA,KAAAC,UAAA,GAAAD,IAAA;MACA;;MAEA;MACA2B,KAAA,8CACAC,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAC,IAAA,IACAF,IAAA,CAAA5B,IAAA;QACAY,OAAA,CAAAC,GAAA,4BAAAb,IAAA;QACA,KAAAE,SAAA,GAAAF,IAAA;MACA;;MAEA;MACA2B,KAAA,gDACAC,IAAA,CAAAC,GAAA,IAAAA,GAAA,CAAAC,IAAA,IACAF,IAAA,CAAA5B,IAAA;QACAY,OAAA,CAAAC,GAAA,8BAAAb,IAAA;QACA,KAAAG,WAAA,GAAAH,IAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}