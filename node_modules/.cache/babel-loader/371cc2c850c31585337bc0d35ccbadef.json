{"remainingRequest":"C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\src\\Celador.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\src\\Celador.vue","mtime":1746029289463},{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745225969000},{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\node_modules\\babel-loader\\lib\\index.js","mtime":1745225939000},{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745225969000},{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores2\\nuevo\\node_modules\\vue-loader\\lib\\index.js","mtime":1745227110000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0cmFzbGFkb3M6IFtdLAogICAgICBzb2NrZXQ6IG51bGwsCiAgICAgIGNlbGFkb3JJZDogdGhpcy4kcm91dGUucGFyYW1zLmlkLAogICAgICBub3RpZmljYWNpb246IG51bGwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KCJ3czovL2xvY2FsaG9zdDozMDAwIik7CiAgICB0aGlzLnNvY2tldC5vbm9wZW4gPSAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJDb25lY3RhZG8gYWwgc2Vydmlkb3IgV2ViU29ja2V0Iik7CiAgICAgIHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoewogICAgICAgIHR5cGU6ICdyZWdpc3RlcicsCiAgICAgICAgaWQ6IHRoaXMuY2VsYWRvcklkCiAgICAgIH0pKTsKICAgICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgdHlwZTogJ3NvbGljaXRhcl90cmFzbGFkb3MnLAogICAgICAgIGNlbGFkb3JJZDogdGhpcy5jZWxhZG9ySWQKICAgICAgfSkpOwogICAgfTsKICAgIHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IGV2ZW50ID0+IHsKICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdudWV2b190cmFzbGFkbycpIHsKICAgICAgICBkYXRhLnRyYXNsYWRvLmFjZXB0YWRvID0gZGF0YS50cmFzbGFkby5lc3RhZG8gPT09ICdhY2VwdGFkbyc7CiAgICAgICAgdGhpcy50cmFzbGFkb3MucHVzaChkYXRhLnRyYXNsYWRvKTsKICAgICAgICBpZiAoZGF0YS50cmFzbGFkby5lc3RhZG8gPT09ICdwZW5kaWVudGUnKSB7CiAgICAgICAgICB0aGlzLm5vdGlmaWNhY2lvbiA9IGBOdWV2byB0cmFzbGFkbzogJHtkYXRhLnRyYXNsYWRvLnViaWNhY2lvbn0g4oaSICR7ZGF0YS50cmFzbGFkby5kZXN0aW5vfWA7CiAgICAgICAgICBuZXcgQXVkaW8oJy9ub3RpLm1wMycpLnBsYXkoKTsKICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5ub3RpZmljYWNpb24gPSBudWxsLCA0MDAwKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ3RyYXNsYWRvc19hc2lnbmFkb3MnKSB7CiAgICAgICAgdGhpcy50cmFzbGFkb3MgPSBkYXRhLnRyYXNsYWRvcy5tYXAodCA9PiAoewogICAgICAgICAgLi4udCwKICAgICAgICAgIGFjZXB0YWRvOiB0LmVzdGFkbyA9PT0gJ2FjZXB0YWRvJwogICAgICAgIH0pKTsKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFjZXB0YXJUcmFzbGFkbyh0cmFzbGFkbykgewogICAgICB0aGlzLnNvY2tldC5zZW5kKEpTT04uc3RyaW5naWZ5KHsKICAgICAgICB0eXBlOiAndHJhc2xhZG9fYWNlcHRhZG8nLAogICAgICAgIHRyYXNsYWRvSWQ6IHRyYXNsYWRvLmlkLAogICAgICAgIGNlbGFkb3JJZDogdGhpcy5jZWxhZG9ySWQKICAgICAgfSkpOwogICAgICB0cmFzbGFkby5hY2VwdGFkbyA9IHRydWU7CiAgICAgIGFsZXJ0KGBUcmFzbGFkbyBhY2VwdGFkbzogJHt0cmFzbGFkby5kZXN0aW5vfWApOwogICAgfSwKICAgIGZpbmFsaXphclRyYXNsYWRvKHRyYXNsYWRvKSB7CiAgICAgIHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoewogICAgICAgIHR5cGU6ICd0cmFzbGFkb19maW5hbGl6YWRvJywKICAgICAgICB0cmFzbGFkb0lkOiB0cmFzbGFkby5pZCwKICAgICAgICBjZWxhZG9ySWQ6IHRoaXMuY2VsYWRvcklkCiAgICAgIH0pKTsKICAgICAgdGhpcy50cmFzbGFkb3MgPSB0aGlzLnRyYXNsYWRvcy5maWx0ZXIodCA9PiB0LmlkICE9PSB0cmFzbGFkby5pZCk7CiAgICAgIGFsZXJ0KGBUcmFzbGFkbyBmaW5hbGl6YWRvOiAke3RyYXNsYWRvLmRlc3Rpbm99YCk7CiAgICB9LAogICAgY2VycmFyU2VzaW9uKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgfSwKICAgIGdldENvbmRpY2lvbmVzVGV4dG8oY29uZGljaW9uZXMpIHsKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29uZGljaW9uZXMpKSB7CiAgICAgICAgcmV0dXJuIGNvbmRpY2lvbmVzLmxlbmd0aCA+IDAgPyBjb25kaWNpb25lcy5qb2luKCcsICcpIDogJ05pbmd1bmEnOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShjb25kaWNpb25lcyk7CiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkocGFyc2VkKSAmJiBwYXJzZWQubGVuZ3RoID4gMCA/IHBhcnNlZC5qb2luKCcsICcpIDogJ05pbmd1bmEnOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuICdOaW5ndW5hJzsKICAgICAgfQogICAgfSwKICAgIGdldFByaW9yaXR5Q29sb3JDbGFzcyhwcmlvcmlkYWQpIHsKICAgICAgc3dpdGNoIChwcmlvcmlkYWQpIHsKICAgICAgICBjYXNlICdBbHRhJzoKICAgICAgICAgIHJldHVybiAnYmctcmVkLTUwMCc7CiAgICAgICAgY2FzZSAnTWVkaWEnOgogICAgICAgICAgcmV0dXJuICdiZy15ZWxsb3ctNTAwJzsKICAgICAgICBjYXNlICdCYWphJzoKICAgICAgICAgIHJldHVybiAnYmctZ3JlZW4tNTAwJzsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgcmV0dXJuICdiZy1ncmF5LTUwMCc7CiAgICAgIH0KICAgIH0sCiAgICBnZXRQcmlvcml0eUJvcmRlckNsYXNzKHByaW9yaWRhZCkgewogICAgICBzd2l0Y2ggKHByaW9yaWRhZCkgewogICAgICAgIGNhc2UgJ0FsdGEnOgogICAgICAgICAgcmV0dXJuICdib3JkZXItcmVkLTUwMCc7CiAgICAgICAgY2FzZSAnTWVkaWEnOgogICAgICAgICAgcmV0dXJuICdib3JkZXIteWVsbG93LTUwMCc7CiAgICAgICAgY2FzZSAnQmFqYSc6CiAgICAgICAgICByZXR1cm4gJ2JvcmRlci1ncmVlbi01MDAnOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICByZXR1cm4gJ2JvcmRlci1ncmF5LTMwMCc7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["data","traslados","socket","celadorId","$route","params","id","notificacion","mounted","WebSocket","onopen","console","log","send","JSON","stringify","type","onmessage","event","parse","traslado","aceptado","estado","push","ubicacion","destino","Audio","play","setTimeout","map","t","methods","aceptarTraslado","trasladoId","alert","finalizarTraslado","filter","cerrarSesion","$router","getCondicionesTexto","condiciones","Array","isArray","length","join","parsed","e","getPriorityColorClass","prioridad","getPriorityBorderClass"],"sources":["src/Celador.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- üîî Notificaci√≥n emergente -->\n    <div v-if=\"notificacion\"\n         class=\"fixed top-4 right-4 bg-blue-700 text-white px-4 py-2 rounded shadow-md animate-fade z-50\">\n      {{ notificacion }}\n    </div>\n\n    <!-- CONTENIDO PRINCIPAL -->\n    <div class=\"min-h-screen bg-gradient-to-br from-white via-slate-100 to-blue-50 px-4 py-8\">\n      <div class=\"max-w-4xl mx-auto bg-white rounded-2xl shadow-md p-6 border border-gray-200\">\n        <h3 class=\"text-2xl font-bold text-blue-800 mb-6 text-center\">Traslados Pendientes</h3>\n\n        <div v-if=\"traslados.length > 0\" class=\"space-y-6\">\n          <div v-for=\"traslado in traslados\" :key=\"traslado.id\"\n              :class=\"['p-4 bg-slate-50 rounded-lg shadow-sm border-2', getPriorityBorderClass(traslado.prioridad)]\">\n            <div class=\"space-y-1\">\n              <p><span class=\"font-semibold text-gray-700\">Ubicaci√≥n del paciente:</span> {{ traslado.ubicacion }}</p>\n              <p><span class=\"font-semibold text-gray-700\">Destino:</span> {{ traslado.destino }}</p>\n              <p>\n                <span class=\"font-semibold text-gray-700\">Prioridad:</span>\n                <span :class=\"getPriorityColorClass(traslado.prioridad)\" class=\"inline-block rounded w-10 h-3 ml-2\"></span>\n              </p>\n\n              <!-- Campos adicionales al aceptar -->\n              <div v-if=\"traslado.aceptado\" class=\"pt-2 space-y-1\">\n                <p>\n                  <span class=\"font-semibold text-gray-700\">Condiciones:</span>\n                  {{ getCondicionesTexto(traslado.condiciones) }}\n                </p>\n                <p><span class=\"font-semibold text-gray-700\">Aislamiento:</span> {{ traslado.aislamiento }}</p>\n                <p><span class=\"font-semibold text-gray-700\">Motivo:</span> {{ traslado.motivo }}</p>\n              </div>\n            </div>\n\n            <!-- Botones -->\n            <div class=\"mt-4 flex gap-3\">\n              <button v-if=\"!traslado.aceptado\"\n                      @click=\"aceptarTraslado(traslado)\"\n                      class=\"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-4 py-2 rounded-md shadow transition\">\n                Aceptar\n              </button>\n\n              <button v-if=\"traslado.aceptado\"\n                      @click=\"finalizarTraslado(traslado)\"\n                      class=\"bg-green-600 hover:bg-green-700 text-white font-semibold px-4 py-2 rounded-md shadow transition\">\n                Finalizar\n              </button>\n            </div>\n          </div>\n        </div>\n\n        <div v-else class=\"text-center text-gray-500 mt-4\">\n          <p>No hay traslados pendientes.</p>\n        </div>\n\n        <!-- Cerrar sesi√≥n -->\n        <div class=\"mt-8 text-center\">\n          <button @click=\"cerrarSesion\"\n                  class=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium px-4 py-2 rounded-md transition\">\n            Cerrar sesi√≥n\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      traslados: [],\n      socket: null,\n      celadorId: this.$route.params.id,\n      notificacion: null\n    };\n  },\n  mounted() {\n    this.socket = new WebSocket(\"ws://localhost:3000\");\n\n    this.socket.onopen = () => {\n      console.log(\"Conectado al servidor WebSocket\");\n      this.socket.send(JSON.stringify({ type: 'register', id: this.celadorId }));\n      this.socket.send(JSON.stringify({ type: 'solicitar_traslados', celadorId: this.celadorId }));\n    };\n\n    this.socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n\n      if (data.type === 'nuevo_traslado') {\n        data.traslado.aceptado = data.traslado.estado === 'aceptado';\n        this.traslados.push(data.traslado);\n\n        if (data.traslado.estado === 'pendiente') {\n          this.notificacion = `Nuevo traslado: ${data.traslado.ubicacion} ‚Üí ${data.traslado.destino}`;\n          new Audio('/noti.mp3').play();\n          setTimeout(() => this.notificacion = null, 4000);\n        }\n      }\n\n      if (data.type === 'traslados_asignados') {\n        this.traslados = data.traslados.map(t => ({\n          ...t,\n          aceptado: t.estado === 'aceptado'\n        }));\n      }\n    };\n  },\n  methods: {\n    aceptarTraslado(traslado) {\n      this.socket.send(JSON.stringify({\n        type: 'traslado_aceptado',\n        trasladoId: traslado.id,\n        celadorId: this.celadorId\n      }));\n      traslado.aceptado = true;\n      alert(`Traslado aceptado: ${traslado.destino}`);\n    },\n    finalizarTraslado(traslado) {\n      this.socket.send(JSON.stringify({\n        type: 'traslado_finalizado',\n        trasladoId: traslado.id,\n        celadorId: this.celadorId\n      }));\n      this.traslados = this.traslados.filter(t => t.id !== traslado.id);\n      alert(`Traslado finalizado: ${traslado.destino}`);\n    },\n    cerrarSesion() {\n      this.$router.push('/');\n    },\n    getCondicionesTexto(condiciones) {\n      if (Array.isArray(condiciones)) {\n        return condiciones.length > 0 ? condiciones.join(', ') : 'Ninguna';\n      }\n      try {\n        const parsed = JSON.parse(condiciones);\n        return Array.isArray(parsed) && parsed.length > 0 ? parsed.join(', ') : 'Ninguna';\n      } catch (e) {\n        return 'Ninguna';\n      }\n    },\n    getPriorityColorClass(prioridad) {\n      switch (prioridad) {\n        case 'Alta':\n          return 'bg-red-500';\n        case 'Media':\n          return 'bg-yellow-500';\n        case 'Baja':\n          return 'bg-green-500';\n        default:\n          return 'bg-gray-500';\n      }\n    },\n    getPriorityBorderClass(prioridad) {\n      switch (prioridad) {\n        case 'Alta':\n          return 'border-red-500';\n        case 'Media':\n          return 'border-yellow-500';\n        case 'Baja':\n          return 'border-green-500';\n        default:\n          return 'border-gray-300';\n      }\n    }\n\n  }\n};\n</script>\n\n<style scoped>\n@keyframes fade {\n  0% { opacity: 0; transform: translateY(-10px); }\n  10% { opacity: 1; transform: translateY(0); }\n  90% { opacity: 1; }\n  100% { opacity: 0; transform: translateY(-10px); }\n}\n\n.animate-fade {\n  animation: fade 4s ease-in-out forwards;\n}\n</style>\n"],"mappings":"AAqEA;EACAA,KAAA;IACA;MACAC,SAAA;MACAC,MAAA;MACAC,SAAA,OAAAC,MAAA,CAAAC,MAAA,CAAAC,EAAA;MACAC,YAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAN,MAAA,OAAAO,SAAA;IAEA,KAAAP,MAAA,CAAAQ,MAAA;MACAC,OAAA,CAAAC,GAAA;MACA,KAAAV,MAAA,CAAAW,IAAA,CAAAC,IAAA,CAAAC,SAAA;QAAAC,IAAA;QAAAV,EAAA,OAAAH;MAAA;MACA,KAAAD,MAAA,CAAAW,IAAA,CAAAC,IAAA,CAAAC,SAAA;QAAAC,IAAA;QAAAb,SAAA,OAAAA;MAAA;IACA;IAEA,KAAAD,MAAA,CAAAe,SAAA,GAAAC,KAAA;MACA,MAAAlB,IAAA,GAAAc,IAAA,CAAAK,KAAA,CAAAD,KAAA,CAAAlB,IAAA;MAEA,IAAAA,IAAA,CAAAgB,IAAA;QACAhB,IAAA,CAAAoB,QAAA,CAAAC,QAAA,GAAArB,IAAA,CAAAoB,QAAA,CAAAE,MAAA;QACA,KAAArB,SAAA,CAAAsB,IAAA,CAAAvB,IAAA,CAAAoB,QAAA;QAEA,IAAApB,IAAA,CAAAoB,QAAA,CAAAE,MAAA;UACA,KAAAf,YAAA,sBAAAP,IAAA,CAAAoB,QAAA,CAAAI,SAAA,MAAAxB,IAAA,CAAAoB,QAAA,CAAAK,OAAA;UACA,IAAAC,KAAA,cAAAC,IAAA;UACAC,UAAA,YAAArB,YAAA;QACA;MACA;MAEA,IAAAP,IAAA,CAAAgB,IAAA;QACA,KAAAf,SAAA,GAAAD,IAAA,CAAAC,SAAA,CAAA4B,GAAA,CAAAC,CAAA;UACA,GAAAA,CAAA;UACAT,QAAA,EAAAS,CAAA,CAAAR,MAAA;QACA;MACA;IACA;EACA;EACAS,OAAA;IACAC,gBAAAZ,QAAA;MACA,KAAAlB,MAAA,CAAAW,IAAA,CAAAC,IAAA,CAAAC,SAAA;QACAC,IAAA;QACAiB,UAAA,EAAAb,QAAA,CAAAd,EAAA;QACAH,SAAA,OAAAA;MACA;MACAiB,QAAA,CAAAC,QAAA;MACAa,KAAA,uBAAAd,QAAA,CAAAK,OAAA;IACA;IACAU,kBAAAf,QAAA;MACA,KAAAlB,MAAA,CAAAW,IAAA,CAAAC,IAAA,CAAAC,SAAA;QACAC,IAAA;QACAiB,UAAA,EAAAb,QAAA,CAAAd,EAAA;QACAH,SAAA,OAAAA;MACA;MACA,KAAAF,SAAA,QAAAA,SAAA,CAAAmC,MAAA,CAAAN,CAAA,IAAAA,CAAA,CAAAxB,EAAA,KAAAc,QAAA,CAAAd,EAAA;MACA4B,KAAA,yBAAAd,QAAA,CAAAK,OAAA;IACA;IACAY,aAAA;MACA,KAAAC,OAAA,CAAAf,IAAA;IACA;IACAgB,oBAAAC,WAAA;MACA,IAAAC,KAAA,CAAAC,OAAA,CAAAF,WAAA;QACA,OAAAA,WAAA,CAAAG,MAAA,OAAAH,WAAA,CAAAI,IAAA;MACA;MACA;QACA,MAAAC,MAAA,GAAA/B,IAAA,CAAAK,KAAA,CAAAqB,WAAA;QACA,OAAAC,KAAA,CAAAC,OAAA,CAAAG,MAAA,KAAAA,MAAA,CAAAF,MAAA,OAAAE,MAAA,CAAAD,IAAA;MACA,SAAAE,CAAA;QACA;MACA;IACA;IACAC,sBAAAC,SAAA;MACA,QAAAA,SAAA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MACA;IACA;IACAC,uBAAAD,SAAA;MACA,QAAAA,SAAA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MACA;IACA;EAEA;AACA","ignoreList":[]}]}