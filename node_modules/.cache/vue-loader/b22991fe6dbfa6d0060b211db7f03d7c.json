{"remainingRequest":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\src\\Celador.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\src\\Celador.vue","mtime":1743938802664},{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743939203533},{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\babel-loader\\lib\\index.js","mtime":1743939204733},{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1743939203533},{"path":"C:\\Users\\pablo\\Documents\\UNIVERSIDAD\\TRABAJO_HOSPITAL\\nuevo\\node_modules\\vue-loader\\lib\\index.js","mtime":1743939202103}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdHJhc2xhZG9zOiBbXSwKICAgICAgc29ja2V0OiBudWxsLAogICAgICBjZWxhZG9ySWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwgLy8gT2J0ZW5lciBlbCBJRCBkZWwgY2VsYWRvciBkZXNkZSBsYSBVUkwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KCJ3czovL2xvY2FsaG9zdDozMDAwIik7CgogICAgLy8gQ29uZWN0YXIgYWwgV2ViU29ja2V0CiAgICB0aGlzLnNvY2tldC5vbm9wZW4gPSAoKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKCJDb25lY3RhZG8gYWwgc2Vydmlkb3IgV2ViU29ja2V0Iik7CiAgICAgIHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoeyB0eXBlOiAncmVnaXN0ZXInLCBpZDogdGhpcy5jZWxhZG9ySWQgfSkpOwogICAgfTsKCiAgICAvLyBFc2N1Y2hhciBsb3MgbWVuc2FqZXMgZGUgdHJhc2xhZG9zCiAgICB0aGlzLnNvY2tldC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CgogICAgICBpZiAoZGF0YS50eXBlID09PSAnbnVldm9fdHJhc2xhZG8nKSB7CiAgICAgICAgLy8gRmlsdHJhciBsb3MgdHJhc2xhZG9zIHF1ZSBsZSBjb3JyZXNwb25kZW4gYWwgY2VsYWRvciBzZWfDum4gc3UgdWJpY2FjacOzbgogICAgICAgIGlmIChkYXRhLnRyYXNsYWRvLnViaWNhY2lvbiAmJiB0aGlzLnViaWNhY2lvbmVzLmluY2x1ZGVzKGRhdGEudHJhc2xhZG8udWJpY2FjaW9uKSkgewogICAgICAgICAgdGhpcy50cmFzbGFkb3MucHVzaChkYXRhLnRyYXNsYWRvKTsKICAgICAgICB9CiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8gTGFzIHViaWNhY2lvbmVzIGFzaWduYWRhcyBhbCBjZWxhZG9yCiAgICB1YmljYWNpb25lcygpIHsKICAgICAgLy8gQXF1w60gZGViZXLDrWFzIGNvbnN1bHRhciBsYXMgdWJpY2FjaW9uZXMgZGVsIGNlbGFkb3IgZW4gbGEgYmFzZSBkZSBkYXRvcyBzaSBlcyBuZWNlc2FyaW8KICAgICAgcmV0dXJuIFsKICAgICAgICAiUExBTlRBIEJBSkEiLCAiUExBTlRBIDLCqiIgLy8gRWplbXBsbywgc2UgcG9kcsOtYW4gY2FyZ2FyIGRlc2RlIGxhIGJhc2UgZGUgZGF0b3MKICAgICAgXTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFjZXB0YXJUcmFzbGFkbyh0cmFzbGFkbykgewogICAgICBhbGVydChgVHJhc2xhZG8gYWNlcHRhZG86ICR7dHJhc2xhZG8uZGVzdGlub31gKTsKICAgICAgLy8gQXF1w60gcHVlZGVzIGltcGxlbWVudGFyIGxhIGzDs2dpY2EgcGFyYSBhY2VwdGFyIGVsIHRyYXNsYWRvIChlbnZpYXIgY29uZmlybWFjacOzbiBhbCBzZXJ2aWRvciwgZXRjLikKICAgIH0sCiAgICBjZXJyYXJTZXNpb24oKSB7CiAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbG9naW4nKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["Celador.vue"],"names":[],"mappings":";AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Celador.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div>\n    <h3>Traslados Pendientes</h3>\n    <div v-if=\"traslados.length > 0\">\n      <div v-for=\"traslado in traslados\" :key=\"traslado.id\" class=\"traslado-item\">\n        <p><strong>Destino:</strong> {{ traslado.destino }}</p>\n        <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\n        <button @click=\"aceptarTraslado(traslado)\">Aceptar</button>\n      </div>\n    </div>\n    <div v-else>\n      <p>No hay traslados pendientes.</p>\n    </div>\n    <button @click=\"cerrarSesion\">Cerrar sesión</button>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      traslados: [],\n      socket: null,\n      celadorId: this.$route.params.id, // Obtener el ID del celador desde la URL\n    };\n  },\n  mounted() {\n    this.socket = new WebSocket(\"ws://localhost:3000\");\n\n    // Conectar al WebSocket\n    this.socket.onopen = () => {\n      console.log(\"Conectado al servidor WebSocket\");\n      this.socket.send(JSON.stringify({ type: 'register', id: this.celadorId }));\n    };\n\n    // Escuchar los mensajes de traslados\n    this.socket.onmessage = (event) => {\n      const data = JSON.parse(event.data);\n\n      if (data.type === 'nuevo_traslado') {\n        // Filtrar los traslados que le corresponden al celador según su ubicación\n        if (data.traslado.ubicacion && this.ubicaciones.includes(data.traslado.ubicacion)) {\n          this.traslados.push(data.traslado);\n        }\n      }\n    };\n  },\n  computed: {\n    // Las ubicaciones asignadas al celador\n    ubicaciones() {\n      // Aquí deberías consultar las ubicaciones del celador en la base de datos si es necesario\n      return [\n        \"PLANTA BAJA\", \"PLANTA 2ª\" // Ejemplo, se podrían cargar desde la base de datos\n      ];\n    }\n  },\n  methods: {\n    aceptarTraslado(traslado) {\n      alert(`Traslado aceptado: ${traslado.destino}`);\n      // Aquí puedes implementar la lógica para aceptar el traslado (enviar confirmación al servidor, etc.)\n    },\n    cerrarSesion() {\n      this.socket.close();\n      this.$router.push('/login');\n    }\n  }\n};\n</script>\n"]}]}