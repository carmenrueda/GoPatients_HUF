{"remainingRequest":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\src\\Jefe.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\src\\Jefe.vue","mtime":1744578952675},{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1744571297417},{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\babel-loader\\lib\\index.js","mtime":1744571250338},{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1744571297417},{"path":"C:\\Users\\pablo\\Downloads\\nuevoIn√©s (2)\\nuevoIn√©s\\nuevo\\node_modules\\vue-loader\\lib\\index.js","mtime":1744572993378}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBlbmRpZW50ZXM6IFtdLA0KICAgICAgYWNlcHRhZG9zOiBbXSwNCiAgICAgIGZpbmFsaXphZG9zOiBbXSwNCiAgICAgIHNvY2tldDogbnVsbCwNCiAgICAgIGplZmVJZDogIkpFRkVfMSINCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuY29uZWN0YXJXZWJTb2NrZXQoKTsgLy8gQ29uZWN0YXIgYWwgV2ViU29ja2V0IGN1YW5kbyBlbCBjb21wb25lbnRlIHNlIG1vbnRhDQogICAgdGhpcy5jYXJnYXJUcmFzbGFkb3MoKTsgLy8gQ2FyZ2FyIGxvcyB0cmFzbGFkb3MgYWwgY2FyZ2FyIGxhIHDDoWdpbmENCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIENvbmVjdGFyIGFsIHNlcnZpZG9yIFdlYlNvY2tldA0KICAgIGNvbmVjdGFyV2ViU29ja2V0KCkgew0KICAgICAgdGhpcy5zb2NrZXQgPSBuZXcgV2ViU29ja2V0KCJ3czovL2xvY2FsaG9zdDozMDAwIik7DQoNCiAgICAgIHRoaXMuc29ja2V0Lm9ub3BlbiA9ICgpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coIldlYlNvY2tldCBjb25lY3RhZG8gY29tbyBqZWZlIik7DQogICAgICAgIHRoaXMuc29ja2V0LnNlbmQoSlNPTi5zdHJpbmdpZnkoew0KICAgICAgICAgIHR5cGU6ICJyZWdpc3Rlcl9qZWZlIiwNCiAgICAgICAgICBpZDogdGhpcy5qZWZlSWQNCiAgICAgICAgfSkpOw0KICAgICAgfTsNCg0KICAgICAgdGhpcy5zb2NrZXQub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7DQogICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpOw0KICAgICAgICBjb25zb2xlLmxvZygiTWVuc2FqZSByZWNpYmlkbzoiLCBkYXRhKTsNCg0KICAgICAgICBpZiAoZGF0YS50eXBlID09PSAiYWN0dWFsaXphcl90cmFzbGFkb3MiKSB7DQogICAgICAgICAgLy8gQWN0dWFsaXphciBsb3MgdHJhc2xhZG9zIGN1YW5kbyBlbCBzZXJ2aWRvciBlbnbDrWUgdW5hIGFjdHVhbGl6YWNpw7NuDQogICAgICAgICAgdGhpcy5jYXJnYXJUcmFzbGFkb3MoKTsNCiAgICAgICAgfQ0KICAgICAgfTsNCg0KICAgICAgdGhpcy5zb2NrZXQub25jbG9zZSA9ICgpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coIldlYlNvY2tldCBjZXJyYWRvLCByZWNvbmVjdGFuZG8gZW4gMnMuLi4iKTsNCiAgICAgICAgc2V0VGltZW91dCh0aGlzLmNvbmVjdGFyV2ViU29ja2V0LCAyMDAwKTsgLy8gSW50ZW50YXIgcmVjb25lY3RhciBkZXNwdcOpcyBkZSAyIHNlZ3VuZG9zDQogICAgICB9Ow0KDQogICAgICB0aGlzLnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGVuIFdlYlNvY2tldDoiLCBlcnJvcik7DQogICAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7IC8vIENlcnJhciBlbCBzb2NrZXQgc2kgb2N1cnJlIHVuIGVycm9yDQogICAgICB9Ow0KICAgIH0sDQoNCiAgICAvLyBDYXJnYXIgbG9zIHRyYXNsYWRvcyBkZSBsYXMgZGlmZXJlbnRlcyBjYXRlZ29yw61hcw0KICAgIGNhcmdhclRyYXNsYWRvcygpIHsNCiAgICAgIGNvbnNvbGUubG9nKCLwn5SEIEVqZWN1dGFuZG8gY2FyZ2FyVHJhc2xhZG9zKCkiKTsNCg0KICAgICAgLy8gRmV0Y2ggZGUgdHJhc2xhZG9zIHBlbmRpZW50ZXMNCiAgICAgIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvdHJhc2xhZG9zL3BlbmRpZW50ZXMiKQ0KICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkNCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coIvCfk6YgUGVuZGllbnRlcyByZWNpYmlkb3M6IiwgZGF0YSk7DQogICAgICAgICAgdGhpcy5wZW5kaWVudGVzID0gZGF0YTsNCiAgICAgICAgfSk7DQoNCiAgICAgIC8vIEZldGNoIGRlIHRyYXNsYWRvcyBhY2VwdGFkb3MNCiAgICAgIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvdHJhc2xhZG9zL2FjZXB0YWRvcyIpDQogICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQ0KICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZygi8J+TpiBBY2VwdGFkb3MgcmVjaWJpZG9zOiIsIGRhdGEpOw0KICAgICAgICAgIHRoaXMuYWNlcHRhZG9zID0gZGF0YTsNCiAgICAgICAgfSk7DQoNCiAgICAgIC8vIEZldGNoIGRlIHRyYXNsYWRvcyBmaW5hbGl6YWRvcw0KICAgICAgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC90cmFzbGFkb3MvZmluYWxpemFkb3MiKQ0KICAgICAgICAudGhlbihyZXMgPT4gcmVzLmpzb24oKSkNCiAgICAgICAgLnRoZW4oZGF0YSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coIvCfk6YgRmluYWxpemFkb3MgcmVjaWJpZG9zOiIsIGRhdGEpOw0KICAgICAgICAgIHRoaXMuZmluYWxpemFkb3MgPSBkYXRhOw0KICAgICAgICB9KTsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["Jefe.vue"],"names":[],"mappings":";AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Jefe.vue","sourceRoot":"src","sourcesContent":["<template>\r\n  <div>\r\n    <h2>Panel del Jefe</h2>\r\n\r\n    <!-- üü° Pendientes -->\r\n    <section>\r\n      <h3>Traslados Pendientes</h3>\r\n      <div v-if=\"pendientes.length > 0\">\r\n        <div v-for=\"traslado in pendientes\" :key=\"traslado.id\" class=\"traslado-item\">\r\n          <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n          <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n          <p><strong>Celador asignado:</strong> {{ traslado.celador_id || \"Sin asignar\" }}</p>\r\n        </div>\r\n      </div>\r\n      <p v-else>No hay traslados pendientes.</p>\r\n    </section>\r\n\r\n    <!-- üü¢ Aceptados -->\r\n    <section>\r\n      <h3>Traslados en Curso</h3>\r\n      <div v-if=\"aceptados.length > 0\">\r\n        <div v-for=\"traslado in aceptados\" :key=\"traslado.id\" class=\"traslado-item\">\r\n          <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n          <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n          <p><strong>Celador asignado:</strong> {{ traslado.celador_id || \"Sin asignar\" }}</p>\r\n        </div>\r\n      </div>\r\n      <p v-else>No hay traslados en curso.</p>\r\n    </section>\r\n\r\n    <!-- ‚úÖ Finalizados -->\r\n    <section>\r\n      <h3>Traslados Finalizados</h3>\r\n      <div v-if=\"finalizados.length > 0\">\r\n        <div v-for=\"traslado in finalizados\" :key=\"traslado.id\" class=\"traslado-item\">\r\n          <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n          <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n          <p><strong>Celador asignado:</strong> {{ traslado.celador_id || \"Sin asignar\" }}</p>\r\n        </div>\r\n      </div>\r\n      <p v-else>No hay traslados finalizados.</p>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      pendientes: [],\r\n      aceptados: [],\r\n      finalizados: [],\r\n      socket: null,\r\n      jefeId: \"JEFE_1\"\r\n    };\r\n  },\r\n  mounted() {\r\n    this.conectarWebSocket(); // Conectar al WebSocket cuando el componente se monta\r\n    this.cargarTraslados(); // Cargar los traslados al cargar la p√°gina\r\n  },\r\n  methods: {\r\n    // Conectar al servidor WebSocket\r\n    conectarWebSocket() {\r\n      this.socket = new WebSocket(\"ws://localhost:3000\");\r\n\r\n      this.socket.onopen = () => {\r\n        console.log(\"WebSocket conectado como jefe\");\r\n        this.socket.send(JSON.stringify({\r\n          type: \"register_jefe\",\r\n          id: this.jefeId\r\n        }));\r\n      };\r\n\r\n      this.socket.onmessage = (event) => {\r\n        const data = JSON.parse(event.data);\r\n        console.log(\"Mensaje recibido:\", data);\r\n\r\n        if (data.type === \"actualizar_traslados\") {\r\n          // Actualizar los traslados cuando el servidor env√≠e una actualizaci√≥n\r\n          this.cargarTraslados();\r\n        }\r\n      };\r\n\r\n      this.socket.onclose = () => {\r\n        console.log(\"WebSocket cerrado, reconectando en 2s...\");\r\n        setTimeout(this.conectarWebSocket, 2000); // Intentar reconectar despu√©s de 2 segundos\r\n      };\r\n\r\n      this.socket.onerror = (error) => {\r\n        console.error(\"Error en WebSocket:\", error);\r\n        this.socket.close(); // Cerrar el socket si ocurre un error\r\n      };\r\n    },\r\n\r\n    // Cargar los traslados de las diferentes categor√≠as\r\n    cargarTraslados() {\r\n      console.log(\"üîÑ Ejecutando cargarTraslados()\");\r\n\r\n      // Fetch de traslados pendientes\r\n      fetch(\"http://localhost:3000/traslados/pendientes\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          console.log(\"üì¶ Pendientes recibidos:\", data);\r\n          this.pendientes = data;\r\n        });\r\n\r\n      // Fetch de traslados aceptados\r\n      fetch(\"http://localhost:3000/traslados/aceptados\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          console.log(\"üì¶ Aceptados recibidos:\", data);\r\n          this.aceptados = data;\r\n        });\r\n\r\n      // Fetch de traslados finalizados\r\n      fetch(\"http://localhost:3000/traslados/finalizados\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          console.log(\"üì¶ Finalizados recibidos:\", data);\r\n          this.finalizados = data;\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n.contenedor {\r\n  max-width: 1200px;\r\n  margin: 30px auto;\r\n  font-family: 'Segoe UI', sans-serif;\r\n  padding: 10px;\r\n}\r\n\r\nh2 {\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  color: #2c3e50;\r\n}\r\n\r\n.columnas {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 20px;\r\n}\r\n\r\n.columna {\r\n  flex: 1;\r\n  background: #f9f9f9;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.05);\r\n  overflow-y: auto;\r\n  max-height: 80vh;\r\n}\r\n\r\nh3 {\r\n  cursor: pointer;\r\n  margin-bottom: 15px;\r\n  color: #34495e;\r\n}\r\n\r\n.traslado-tarjeta {\r\n  border: 1px solid #ccc;\r\n  border-left: 6px solid #34495e;\r\n  border-radius: 8px;\r\n  padding: 12px;\r\n  margin-bottom: 15px;\r\n  background-color: #fff;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.04);\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.traslado-tarjeta:hover {\r\n  background-color: #f0f4f8;\r\n}\r\n\r\n.info-detallada {\r\n  margin-top: 10px;\r\n  padding-top: 10px;\r\n  border-top: 1px dashed #ccc;\r\n}\r\n\r\n.prioridad {\r\n  padding: 4px 10px;\r\n  border-radius: 12px;\r\n  font-size: 0.9em;\r\n  font-weight: normal;\r\n  color: #333;\r\n  background-color: #eee;\r\n  display: inline-block;\r\n}\r\n\r\n.prioridad.alta {\r\n  background-color: #f8d7da;\r\n}\r\n\r\n.prioridad.media {\r\n  background-color: #fff3cd;\r\n}\r\n\r\n.prioridad.baja {\r\n  background-color: #d4edda;\r\n}\r\n\r\n.fade-enter-active, .fade-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n.fade-enter-from, .fade-leave-to {\r\n  opacity: 0;\r\n  transform: translateY(-10px);\r\n}\r\n</style>\r\n\r\n\r\n\r\n\r\n\r\n"]}]}