{"remainingRequest":"C:\\Users\\Usuario\\Desktop\\web_celadores\\nuevo\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Usuario\\Desktop\\web_celadores\\nuevo\\src\\Jefe.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores\\nuevo\\src\\Jefe.vue","mtime":1745591998094},{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745225969000},{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores\\nuevo\\node_modules\\babel-loader\\lib\\index.js","mtime":1745225939000},{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores\\nuevo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1745225969000},{"path":"C:\\Users\\Usuario\\Desktop\\web_celadores\\nuevo\\node_modules\\vue-loader\\lib\\index.js","mtime":1745227110000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHBlbmRpZW50ZXM6IFtdLA0KICAgICAgYWNlcHRhZG9zOiBbXSwNCiAgICAgIGZpbmFsaXphZG9zOiBbXSwNCiAgICAgIHNvY2tldDogbnVsbCwNCiAgICAgIGplZmVJZDogIkpFRkVfMSINCiAgICB9Ow0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIHRoaXMuY29uZWN0YXJXZWJTb2NrZXQoKTsNCiAgICB0aGlzLmNhcmdhclRyYXNsYWRvcygpOw0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY29uZWN0YXJXZWJTb2NrZXQoKSB7DQogICAgICB0aGlzLnNvY2tldCA9IG5ldyBXZWJTb2NrZXQoIndzOi8vbG9jYWxob3N0OjMwMDAiKTsNCg0KICAgICAgdGhpcy5zb2NrZXQub25vcGVuID0gKCkgPT4gew0KICAgICAgICBjb25zb2xlLmxvZygiV2ViU29ja2V0IGNvbmVjdGFkbyBjb21vIGplZmUiKTsNCiAgICAgICAgdGhpcy5zb2NrZXQuc2VuZChKU09OLnN0cmluZ2lmeSh7IHR5cGU6ICJyZWdpc3Rlcl9qZWZlIiwgaWQ6IHRoaXMuamVmZUlkIH0pKTsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuc29ja2V0Lm9ubWVzc2FnZSA9IChldmVudCkgPT4gew0KICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTsNCiAgICAgICAgaWYgKGRhdGEudHlwZSA9PT0gImFjdHVhbGl6YXJfdHJhc2xhZG9zIikgdGhpcy5jYXJnYXJUcmFzbGFkb3MoKTsNCiAgICAgIH07DQoNCiAgICAgIHRoaXMuc29ja2V0Lm9uY2xvc2UgPSAoKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCJXZWJTb2NrZXQgY2VycmFkbywgcmVjb25lY3RhbmRvIGVuIDJzLi4uIik7DQogICAgICAgIHNldFRpbWVvdXQodGhpcy5jb25lY3RhcldlYlNvY2tldCwgMjAwMCk7DQogICAgICB9Ow0KDQogICAgICB0aGlzLnNvY2tldC5vbmVycm9yID0gKGVycm9yKSA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yIGVuIFdlYlNvY2tldDoiLCBlcnJvcik7DQogICAgICAgIHRoaXMuc29ja2V0LmNsb3NlKCk7DQogICAgICB9Ow0KICAgIH0sDQogICAgY2FyZ2FyVHJhc2xhZG9zKCkgew0KICAgICAgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC90cmFzbGFkb3MvcGVuZGllbnRlcyIpDQogICAgICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKQ0KICAgICAgICAudGhlbihkYXRhID0+IHsNCiAgICAgICAgICB0aGlzLnBlbmRpZW50ZXMgPSBkYXRhLm1hcCh0ID0+ICh7IC4uLnQsIGV4cGFuZGlkbzogZmFsc2UgfSkpOw0KICAgICAgICB9KTsNCg0KICAgICAgZmV0Y2goImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC90cmFzbGFkb3MvYWNlcHRhZG9zIikNCiAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpDQogICAgICAgIC50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuYWNlcHRhZG9zID0gZGF0YS5tYXAodCA9PiAoeyAuLi50LCBleHBhbmRpZG86IGZhbHNlIH0pKTsNCiAgICAgICAgfSk7DQoNCiAgICAgIGZldGNoKCJodHRwOi8vbG9jYWxob3N0OjMwMDAvdHJhc2xhZG9zL2ZpbmFsaXphZG9zIikNCiAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpDQogICAgICAgIC50aGVuKGRhdGEgPT4gew0KICAgICAgICAgIHRoaXMuZmluYWxpemFkb3MgPSBkYXRhLm1hcCh0ID0+ICh7IC4uLnQsIGV4cGFuZGlkbzogZmFsc2UgfSkpOw0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHRvZ2dsZUV4cGFuZCh0cmFzbGFkbykgew0KICAgICAgdHJhc2xhZG8uZXhwYW5kaWRvID0gIXRyYXNsYWRvLmV4cGFuZGlkbzsNCiAgICB9LA0KICAgIGNlcnJhclNlc2lvbigpIHsNCiAgICAgIGlmICh0aGlzLnNvY2tldCkgdGhpcy5zb2NrZXQuY2xvc2UoKTsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCIvIik7DQogICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["Jefe.vue"],"names":[],"mappings":";AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Jefe.vue","sourceRoot":"src","sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gradient-to-br from-white via-slate-100 to-blue-50 p-6\">\r\n\r\n    <!-- 🔘 Botón de cerrar sesión -->\r\n    <div class=\"flex justify-end mb-4\">\r\n      <button @click=\"cerrarSesion\"\r\n              class=\"bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium px-4 py-2 rounded-md transition\">\r\n        Cerrar sesión\r\n      </button>\r\n    </div>\r\n\r\n    <!-- 🔳 Grid de columnas -->\r\n    <div class=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n\r\n      <!-- Pendientes -->\r\n      <section>\r\n        <h3 class=\"text-lg font-semibold text-blue-800 mb-3 text-center\">Pendientes</h3>\r\n        <div v-if=\"pendientes.length > 0\" class=\"space-y-3\">\r\n          <div v-for=\"traslado in pendientes\" :key=\"traslado.id\"\r\n               class=\"bg-white p-4 rounded-lg border border-gray-200 shadow cursor-pointer transition hover:shadow-md\"\r\n               @click=\"toggleExpand(traslado)\">\r\n            <p><strong>Ubicación:</strong> {{ traslado.ubicacion }}</p>\r\n            <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n            <p><strong>Celador:</strong> {{ traslado.celador_id || 'Sin asignar' }}</p>\r\n\r\n            <div v-if=\"traslado.expandido\" class=\"mt-2 text-sm text-gray-700 space-y-1\">\r\n              <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n              <p><strong>Condiciones:</strong>\r\n                {{ traslado.condiciones && traslado.condiciones.length > 0 ? traslado.condiciones.join(', ') : 'Ninguna' }}\r\n              </p>\r\n              <p><strong>Aislamiento:</strong> {{ traslado.aislamiento }}</p>\r\n              <p><strong>Prioridad:</strong> {{ traslado.prioridad }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p v-else class=\"text-center text-gray-500\">Sin traslados</p>\r\n      </section>\r\n\r\n      <!-- En Curso -->\r\n      <section>\r\n        <h3 class=\"text-lg font-semibold text-yellow-700 mb-3 text-center\">En Curso</h3>\r\n        <div v-if=\"aceptados.length > 0\" class=\"space-y-3\">\r\n          <div v-for=\"traslado in aceptados\" :key=\"traslado.id\"\r\n               class=\"bg-white p-4 rounded-lg border border-yellow-200 shadow cursor-pointer transition hover:shadow-md\"\r\n               @click=\"toggleExpand(traslado)\">\r\n            <p><strong>Ubicación:</strong> {{ traslado.ubicacion }}</p>\r\n            <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n            <p><strong>Celador:</strong> {{ traslado.celador_id || 'Sin asignar' }}</p>\r\n\r\n            <div v-if=\"traslado.expandido\" class=\"mt-2 text-sm text-gray-700 space-y-1\">\r\n              <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n              <p><strong>Condiciones:</strong>\r\n                {{ traslado.condiciones && traslado.condiciones.length > 0 ? traslado.condiciones.join(', ') : 'Ninguna' }}\r\n              </p>\r\n              <p><strong>Aislamiento:</strong> {{ traslado.aislamiento }}</p>\r\n              <p><strong>Prioridad:</strong> {{ traslado.prioridad }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p v-else class=\"text-center text-gray-500\">Sin traslados</p>\r\n      </section>\r\n\r\n      <!-- Finalizados -->\r\n      <section>\r\n        <h3 class=\"text-lg font-semibold text-green-800 mb-3 text-center\">Finalizados</h3>\r\n        <div v-if=\"finalizados.length > 0\" class=\"space-y-3\">\r\n          <div v-for=\"traslado in finalizados\" :key=\"traslado.id\"\r\n               class=\"bg-white p-4 rounded-lg border border-green-200 shadow cursor-pointer transition hover:shadow-md\"\r\n               @click=\"toggleExpand(traslado)\">\r\n            <p><strong>Ubicación:</strong> {{ traslado.ubicacion }}</p>\r\n            <p><strong>Destino:</strong> {{ traslado.destino }}</p>\r\n            <p><strong>Celador:</strong> {{ traslado.celador_id || 'Sin asignar' }}</p>\r\n\r\n            <div v-if=\"traslado.expandido\" class=\"mt-2 text-sm text-gray-700 space-y-1\">\r\n              <p><strong>Motivo:</strong> {{ traslado.motivo }}</p>\r\n              <p><strong>Condiciones:</strong>\r\n                {{ traslado.condiciones && traslado.condiciones.length > 0 ? traslado.condiciones.join(', ') : 'Ninguna' }}\r\n              </p>\r\n              <p><strong>Aislamiento:</strong> {{ traslado.aislamiento }}</p>\r\n              <p><strong>Prioridad:</strong> {{ traslado.prioridad }}</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <p v-else class=\"text-center text-gray-500\">Sin traslados</p>\r\n      </section>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      pendientes: [],\r\n      aceptados: [],\r\n      finalizados: [],\r\n      socket: null,\r\n      jefeId: \"JEFE_1\"\r\n    };\r\n  },\r\n  mounted() {\r\n    this.conectarWebSocket();\r\n    this.cargarTraslados();\r\n  },\r\n  methods: {\r\n    conectarWebSocket() {\r\n      this.socket = new WebSocket(\"ws://localhost:3000\");\r\n\r\n      this.socket.onopen = () => {\r\n        console.log(\"WebSocket conectado como jefe\");\r\n        this.socket.send(JSON.stringify({ type: \"register_jefe\", id: this.jefeId }));\r\n      };\r\n\r\n      this.socket.onmessage = (event) => {\r\n        const data = JSON.parse(event.data);\r\n        if (data.type === \"actualizar_traslados\") this.cargarTraslados();\r\n      };\r\n\r\n      this.socket.onclose = () => {\r\n        console.log(\"WebSocket cerrado, reconectando en 2s...\");\r\n        setTimeout(this.conectarWebSocket, 2000);\r\n      };\r\n\r\n      this.socket.onerror = (error) => {\r\n        console.error(\"Error en WebSocket:\", error);\r\n        this.socket.close();\r\n      };\r\n    },\r\n    cargarTraslados() {\r\n      fetch(\"http://localhost:3000/traslados/pendientes\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          this.pendientes = data.map(t => ({ ...t, expandido: false }));\r\n        });\r\n\r\n      fetch(\"http://localhost:3000/traslados/aceptados\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          this.aceptados = data.map(t => ({ ...t, expandido: false }));\r\n        });\r\n\r\n      fetch(\"http://localhost:3000/traslados/finalizados\")\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          this.finalizados = data.map(t => ({ ...t, expandido: false }));\r\n        });\r\n    },\r\n    toggleExpand(traslado) {\r\n      traslado.expandido = !traslado.expandido;\r\n    },\r\n    cerrarSesion() {\r\n      if (this.socket) this.socket.close();\r\n      this.$router.push(\"/\");\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Estética y transiciones ya incluidas por Tailwind */\r\n</style>\r\n"]}]}